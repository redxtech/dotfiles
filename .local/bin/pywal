#!/usr/bin/env sh

# function to apply pywal to all the things
main () {
  # default colour palette backend
  # local backend="haishoku"
  # local backend="colorz"
  # local backend="colorthief"

  # allow specifying other backends
  if ! test -z "$1"; then
    backend="$1"
  fi

  # find absolute path to wallpaper
  local wallpaper_abs="$(realpath ~/.config/wall.png)"

  # run pywal on the current wallpaper
  wal -n --backend "${backend:-wal}" -i "$wallpaper_abs"

  # apply colour scheme to discord
  if command -v pywal-discord >/dev/null; then
    pywal-discord
  else
    echo "pywal-discord not installed"
  fi
}

main $1

