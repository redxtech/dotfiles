#!/usr/bin/env sh

# pull in some dependencies
# shellcheck source=../utils/testdeps.sh
. "$HOME/.local/bin/utils/testdeps.sh" || exit 1

# error logging function
log_err () {
    echo "error: $*"
}

# script to manage vpn connections
main () {
    # test to see if all the dependencies are installed
    if ! testdeps nordvpn; then
        exit 1
    fi

    # run the specified systemctl command for vpn
    case $1 in
        start|up) # start
            # sudo systemctl start vpn
            ;;
        restart|rs) # restart
            # sudo systemctl restart vpn
            ;;
        stop|down|dn) # stop
            # sudo systemctl stop vpn
            ;;
        status) # status
            # sudo systemctl status vpn
            ;;
        enable|setup) # enable
            # sudo systemctl --now enable vpn
            ;;
        disable|remove) # disable
            # sudo systemctl --now disable vpn
            ;;
        *) # default
            log_err "that operation doesn't exist"
            return 1
            ;;
    esac
}

main "$@"

