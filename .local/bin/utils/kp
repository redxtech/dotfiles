#!/usr/bin/env sh

# script to kill a process found with fzf
main () {

    # make sure fzf is installed
    if ! command -v fzf >/dev/null; then
        echo "error: fzf not installed"
        return 1
    fi

    # find process and kill it
    KP_PID=$(ps -ef | sed 1d | eval "fzf $FZF_DEFAULT_OPTS -m --header='[kill:process]'" | awk '{print $2}')

    if test -n "$KP_PID"; then
        if test -n "$1"; then
            echo "$KP_PID" | xargs kill "$1"
        else
            echo "$KP_PID" | xargs kill -9
        fi
    fi
}

main "$@"

