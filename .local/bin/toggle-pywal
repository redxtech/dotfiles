#!/usr/bin/env sh

# script to change the theme of certain applications affected by pywal
# in order to easily toggle between pywal theme and any other theme

enable_vim () {
	# comment out main colourscheme and uncomment wal
	sed -i \
		-e "s/^vim\.cmd('colo/-- vim\.cmd('colo/" \
		-e "s/^-- vim.cmd('colo wal')/vim\.cmd('colo wal')/" \
		~/.config/nvim/lua/init.lua

	# comment out airline theme setting
	sed -i -e 's/^let g:airline_theme/" let g:airline_theme/' ~/.config/nvim/init.vim
}

disable_vim () {
	# comment out wal and uncomment main colourscheme 
	sed -i \
		-e "s/^-- vim\.cmd('colo/vim\.cmd('colo/" \
		-e "s/^vim.cmd('colo wal')/-- vim\.cmd('colo wal')/" \
		~/.config/nvim/lua/init.lua

	# uncomment airline theme setting
	sed -i -e 's/^let g:airline_theme/" let g:airline_theme/' ~/.config/nvim/init.vim
}

enable_kitty () {
	# comment out theme and uncomment wal theme
	sed -i \
		-e "s/^include theme.conf/# include theme.conf/" \
		-e "s/^# include ~\/\.cache\/wal\/colors-kitty\.conf/include ~\/.cache\/wal\/colors-kitty\.conf/" \
		~/.config/kitty/kitty.conf
}

disable_kitty () {
	# comment out wal theme and uncomment theme
	sed -i \
		-e "s/^# include theme.conf/include theme.conf/" \
		-e "s/^include ~\/\.cache\/wal\/colors-kitty\.conf/# include ~\/.cache\/wal\/colors-kitty\.conf/" \
		~/.config/kitty/kitty.conf
}

# TODO:
# - bspwm
# - discord
# - tmux
# - rofi
# - vscode
# - zsh

main () {
	# TODO: detect current status and then toggle without need for $1
	if test "$1" = "on"; then
		enable_vim
		enable_kitty
	else
		disable_vim
		disable_kitty
	fi
}

main $1

